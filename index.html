<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>Force Layout Example 1</title>
    <style>
        .node {
            fill: #ccc;
            stroke: #fff;
            stroke-width: 2px;
        }

        .link {
            stroke: #777;
            stroke-width: 2px;
        }
    </style>
</head>
<body>
<script src='https://d3js.org/d3.v3.min.js'></script>
<script>
    const width = 800;
    const height = 600;

    const nodes = [
        {},
        {},
        {}
    ];

    const links = [
        {source: 0, target: 1},
        {source: 0, target: 2},
    ];

    const svg = d3.select('body').append('svg')
        .attr('width', width)
        .attr('height', height);

    const force = d3.layout.force()
        .size([width, height])
        .nodes(nodes)
        .links(links);

    force.linkDistance(width / 4);

    const link = svg.selectAll('.link')
        .data(links)
        .enter().append('line')
        .attr('class', 'link');

    const node = svg.selectAll('.node')
        .data(nodes)
        .enter().append('circle')
        .attr('class', 'node');

    // when calculations are done
    force.on('end', () => {
        node
            .attr('r', width / 25)
            .attr('cx', (d) => {
                return d.x;
            })
            .attr('cy', (d) => {
                return d.y;
            })
        ;

        link
            .attr('x1', (d) => {
                return d.source.x;
            })
            .attr('y1', (d) => {
                return d.source.y;
            })
            .attr('x2', (d) => {
                return d.target.x;
            })
            .attr('y2', (d) => {
                return d.target.y;
            })
        ;
    });

    force.start();

</script>
</body>
</html>